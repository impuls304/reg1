# ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

## üéØ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

\`\`\`
reg_mer/
‚îú‚îÄ‚îÄ app/                    # Frontend (React)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/useRegistration.ts  ‚Üê –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ .env.example        ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (VITE_API_URL)
‚îÇ
‚îú‚îÄ‚îÄ server/                 # Backend (Node.js + Express + PostgreSQL)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts        ‚Üê API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.ts           ‚Üê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrate.ts      ‚Üê –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email.ts        ‚Üê –û—Ç–ø—Ä–∞–≤–∫–∞ email
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ view-stats.ts   ‚Üê –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ .env.example        ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î –∏ email
‚îÇ   ‚îî‚îÄ‚îÄ export_data.sh      ‚Üê –°–∫—Ä–∏–ø—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ
‚îú‚îÄ‚îÄ README.md               # –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ DEPLOYMENT.md           # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é (‚≠ê –ì–õ–ê–í–ù–´–ô –§–ê–ô–õ)
‚îú‚îÄ‚îÄ QUICKSTART.md           # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îî‚îÄ‚îÄ COMMANDS.md             # –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
\`\`\`

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Backend (API)
‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º email** (–¥–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è)
‚úÖ **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL** (–∏–º—è, —Ñ–∞–º–∏–ª–∏—è, email)
‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** —á–µ—Ä–µ–∑ Yandex/Mail.ru
‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤** (honeypot, time-based, rate limiting)
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫** —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚úÖ **API endpoints**:
   - \`POST /api/register\` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
   - \`POST /api/verify\` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–¥–∞
   - \`GET /api/availability\` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–µ—Å—Ç
   - \`GET /api/stats\` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
‚úÖ **–¢–∞–±–ª–∏—Ü–∞ registrations** - –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚úÖ **–¢–∞–±–ª–∏—Ü–∞ registration_attempts** - –∂—É—Ä–Ω–∞–ª –ø–æ–ø—ã—Ç–æ–∫
‚úÖ **–ò–Ω–¥–µ–∫—Å—ã** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
‚úÖ **–°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### Frontend
‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å backend API** (–≤–º–µ—Å—Ç–æ localStorage)
‚úÖ **–ö—Ä–∞—Å–∏–≤—ã–π UI** –Ω–∞ React + Tailwind
‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω**
‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º**

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

\`\`\`bash
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
\`\`\`

### 2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

\`\`\`bash
sudo -u postgres psql
CREATE DATABASE registration_db;
CREATE USER reg_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE registration_db TO reg_user;
\\q
\`\`\`

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Backend

\`\`\`bash
cd server
npm install
cp .env.example .env
nano .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ DB_*, EMAIL_*, MAX_PARTICIPANTS
npm run build
npm run db:migrate
\`\`\`

### 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ email (Yandex –∏–ª–∏ Mail.ru)

1. –°–æ–∑–¥–∞–π—Ç–µ "–ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–æ—á—Ç—ã
2. –£–∫–∞–∂–∏—Ç–µ –≤ \`.env\`:
   \`\`\`
   EMAIL_HOST=smtp.yandex.ru
   EMAIL_PORT=465
   EMAIL_USER=your_email@yandex.ru
   EMAIL_PASSWORD=app_password_here
   \`\`\`

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Backend

\`\`\`bash
# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm install -g pm2
pm2 start dist/index.js --name "registration-api"
pm2 save
\`\`\`

### 6. –°–æ–±–µ—Ä–∏—Ç–µ Frontend

\`\`\`bash
cd ../app
npm install
cp .env.example .env
nano .env  # –£–∫–∞–∂–∏—Ç–µ VITE_API_URL
npm run build
\`\`\`

### 7. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx

–°–º. –ø–æ–¥—Ä–æ–±–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ [DEPLOYMENT.md](DEPLOYMENT.md)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[DEPLOYMENT.md](DEPLOYMENT.md)** ‚≠ê - **–û–°–ù–û–í–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø** –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **[QUICKSTART.md](QUICKSTART.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **[COMMANDS.md](COMMANDS.md)** - –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **[README.md](README.md)** - –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

---

## üóÑÔ∏è –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

\`\`\`bash
cd server
npm run db:stats
\`\`\`

### –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

\`\`\`bash
cd server
npm run db:export
\`\`\`

–§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ \`server/exports/\`

### –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ë–î

\`\`\`bash
sudo -u postgres psql -d registration_db

SELECT first_name, last_name, email, verified_at 
FROM registrations 
WHERE is_verified = true 
ORDER BY verified_at DESC;
\`\`\`

---

## üá∑üá∫ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –†–§

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
‚úÖ **PostgreSQL** - –Ω–∞–¥–µ–∂–Ω–∞—è –°–£–ë–î —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º
‚úÖ **–†–æ—Å—Å–∏–π—Å–∫–∏–µ email —Å–µ—Ä–≤–∏—Å—ã** - Yandex, Mail.ru, Rambler
‚úÖ **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –Ω–µ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º
‚úÖ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Ö–æ—Å—Ç–∏–Ω–≥–∞—Ö** (Selectel, Timeweb, REG.RU)

---

## üîß API Endpoints

### POST /api/register
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–æ–¥–∞ –Ω–∞ email

**–ó–∞–ø—Ä–æ—Å:**
\`\`\`json
{
  "firstName": "–ò–≤–∞–Ω",
  "lastName": "–ò–≤–∞–Ω–æ–≤",
  "email": "ivan@example.com"
}
\`\`\`

### POST /api/verify
–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–æ–¥–∞

**–ó–∞–ø—Ä–æ—Å:**
\`\`\`json
{
  "email": "ivan@example.com",
  "code": "123456"
}
\`\`\`

### GET /api/availability
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Å—Ç

### GET /api/stats
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt - –±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall (ufw)
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø PostgreSQL —á–µ—Ä–µ–∑ cron
- –•—Ä–∞–Ω–∏—Ç–µ –±—ç–∫–∞–ø—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PM2 –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ backend
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –º–µ—Å—Ç–æ–º –Ω–∞ –¥–∏—Å–∫–µ

---

## üéØ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

\`\`\`bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ backend
pm2 logs registration-api

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend
pm2 restart registration-api

# –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö
cd server && npm run db:stats

# –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
cd server && npm run db:export

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API
curl http://localhost:3000/health
\`\`\`

---

## ‚ùì –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ [DEPLOYMENT.md](DEPLOYMENT.md) - —Ç–∞–º –æ–ø–∏—Å–∞–Ω—ã —Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   - Backend: \`pm2 logs registration-api\`
   - Nginx: \`sudo tail -f /var/log/nginx/error.log\`
   - PostgreSQL: \`sudo -u postgres psql\`

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ **[DEPLOYMENT.md](DEPLOYMENT.md)** –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ.

**–í—Å–µ –¥–∞–Ω–Ω—ã–µ (–∏–º—è, —Ñ–∞–º–∏–ª–∏—è, email) –±—É–¥—É—Ç –Ω–∞–¥–µ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –≤–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL!**
